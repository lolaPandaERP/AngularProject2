{"ast":null,"code":"import { Validators } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"../../../Services/auth/auth.service\";\nimport * as i3 from \"../../../Services/resource/resource.service\";\nimport * as i4 from \"@angular/router\";\nfunction ResourceCreateComponent_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 16);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.errorMessage, \"\\n\");\n  }\n}\n// import { resource } from 'src/app/DTO/resource';\nexport class ResourceCreateComponent {\n  constructor(fb, authService, resourceService, router) {\n    this.fb = fb;\n    this.authService = authService;\n    this.resourceService = resourceService;\n    this.router = router;\n  }\n  ngOnInit() {\n    this.createForm = this.fb.group({\n      title: ['', Validators.required],\n      description: ['', Validators.required],\n      type: ['', Validators.required],\n      file: ['', Validators.required]\n    });\n  }\n  createResource() {\n    const resource = {\n      title: this.createForm.get('title').value,\n      description: this.createForm.get('description').value,\n      type: this.createForm.get('type').value,\n      file: this.createForm.get('file').value\n    };\n    this.resourceService.createResource(resource).subscribe(response => {\n      console.log(response);\n      this.router.navigate(['/resources']);\n    }, error => {\n      this.errorMessage = error.error.message;\n    });\n  }\n}\nResourceCreateComponent.ɵfac = function ResourceCreateComponent_Factory(t) {\n  return new (t || ResourceCreateComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.AuthService), i0.ɵɵdirectiveInject(i3.ResourceService), i0.ɵɵdirectiveInject(i4.Router));\n};\nResourceCreateComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: ResourceCreateComponent,\n  selectors: [[\"app-resource-create\"]],\n  decls: 30,\n  vars: 3,\n  consts: [[\"class\", \"error-message\", 4, \"ngIf\"], [3, \"formGroup\", \"ngSubmit\"], [1, \"form-group\"], [\"for\", \"title\"], [\"type\", \"text\", \"id\", \"title\", \"formControlName\", \"title\", \"required\", \"\", 1, \"form-control\"], [\"for\", \"description\"], [\"id\", \"description\", \"formControlName\", \"description\", \"required\", \"\", 1, \"form-control\"], [\"for\", \"type\"], [\"id\", \"type\", \"formControlName\", \"type\", \"required\", \"\", 1, \"form-control\"], [\"value\", \"\"], [\"value\", \"photo\"], [\"value\", \"message\"], [\"value\", \"article\"], [\"for\", \"file\"], [\"type\", \"file\", \"id\", \"file\", \"formControlName\", \"file\", \"required\", \"\", 1, \"form-control\"], [\"type\", \"submit\", 3, \"disabled\"], [1, \"error-message\"]],\n  template: function ResourceCreateComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"h2\");\n      i0.ɵɵtext(1, \"Create Resource\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(2, ResourceCreateComponent_div_2_Template, 2, 1, \"div\", 0);\n      i0.ɵɵelementStart(3, \"form\", 1);\n      i0.ɵɵlistener(\"ngSubmit\", function ResourceCreateComponent_Template_form_ngSubmit_3_listener() {\n        return ctx.createResource();\n      });\n      i0.ɵɵelementStart(4, \"div\", 2)(5, \"label\", 3);\n      i0.ɵɵtext(6, \"Title\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(7, \"input\", 4);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(8, \"div\", 2)(9, \"label\", 5);\n      i0.ɵɵtext(10, \"Description\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(11, \"textarea\", 6);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(12, \"div\", 2)(13, \"label\", 7);\n      i0.ɵɵtext(14, \"Type\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(15, \"select\", 8)(16, \"option\", 9);\n      i0.ɵɵtext(17, \"Select type\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(18, \"option\", 10);\n      i0.ɵɵtext(19, \"Photo\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(20, \"option\", 11);\n      i0.ɵɵtext(21, \"Message\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(22, \"option\", 12);\n      i0.ɵɵtext(23, \"Article\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(24, \"div\", 2)(25, \"label\", 13);\n      i0.ɵɵtext(26, \"File\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(27, \"input\", 14);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(28, \"button\", 15);\n      i0.ɵɵtext(29, \"Create\");\n      i0.ɵɵelementEnd()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", ctx.errorMessage);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"formGroup\", ctx.createForm);\n      i0.ɵɵadvance(25);\n      i0.ɵɵproperty(\"disabled\", ctx.createForm.invalid);\n    }\n  },\n  styles: [\"(()[_ngcontent-%COMP%]   =[_ngcontent-%COMP%] >  { // webpackBootstrap\\n \\t\\\"use strict\\\";\\n \\t\\n \\t\\n })()[_ngcontent-%COMP%]\\n;\"]\n});","map":{"version":3,"mappings":"AAUA,SAAiCA,UAAU,QAAQ,gBAAgB;;;;;;;;ICHnEC,+BAAgD;IAC9CA,YACF;IAAAA,iBAAM;;;;IADJA,eACF;IADEA,qDACF;;;ADOA;AAOA,OAAM,MAAOC,uBAAuB;EAIlCC,YACUC,EAAe,EACfC,WAAwB,EACxBC,eAAgC,EAChCC,MAAc;IAHd,OAAE,GAAFH,EAAE;IACF,gBAAW,GAAXC,WAAW;IACX,oBAAe,GAAfC,eAAe;IACf,WAAM,GAANC,MAAM;EACZ;EAEJC,QAAQ;IACN,IAAI,CAACC,UAAU,GAAG,IAAI,CAACL,EAAE,CAACM,KAAK,CAAC;MAC9BC,KAAK,EAAE,CAAC,EAAE,EAAEX,UAAU,CAACY,QAAQ,CAAC;MAChCC,WAAW,EAAE,CAAC,EAAE,EAAEb,UAAU,CAACY,QAAQ,CAAC;MACtCE,IAAI,EAAE,CAAC,EAAE,EAAEd,UAAU,CAACY,QAAQ,CAAC;MAC/BG,IAAI,EAAE,CAAC,EAAE,EAAEf,UAAU,CAACY,QAAQ;KAC/B,CAAC;EACJ;EAEAI,cAAc;IACZ,MAAMC,QAAQ,GAAG;MACfN,KAAK,EAAE,IAAI,CAACF,UAAU,CAACS,GAAG,CAAC,OAAO,CAAC,CAACC,KAAK;MACzCN,WAAW,EAAE,IAAI,CAACJ,UAAU,CAACS,GAAG,CAAC,aAAa,CAAC,CAACC,KAAK;MACrDL,IAAI,EAAE,IAAI,CAACL,UAAU,CAACS,GAAG,CAAC,MAAM,CAAC,CAACC,KAAK;MACvCJ,IAAI,EAAE,IAAI,CAACN,UAAU,CAACS,GAAG,CAAC,MAAM,CAAC,CAACC;KACnC;IAED,IAAI,CAACb,eAAe,CAACU,cAAc,CAACC,QAAQ,CAAC,CAC1CG,SAAS,CACPC,QAAQ,IAAI;MACXC,OAAO,CAACC,GAAG,CAACF,QAAQ,CAAC;MACrB,IAAI,CAACd,MAAM,CAACiB,QAAQ,CAAC,CAAC,YAAY,CAAC,CAAC;IACtC,CAAC,EACAC,KAAK,IAAI;MACR,IAAI,CAACC,YAAY,GAAGD,KAAK,CAACA,KAAK,CAACE,OAAO;IACzC,CAAC,CACF;EACL;;AAtCWzB,uBAAuB;mBAAvBA,uBAAuB;AAAA;AAAvBA,uBAAuB;QAAvBA,uBAAuB;EAAA0B;EAAAC;EAAAC;EAAAC;EAAAC;IAAA;MCjBpC/B,0BAAI;MAAAA,+BAAe;MAAAA,iBAAK;MACxBA,wEAEM;MACNA,+BAA6D;MAA9BA;QAAA,OAAYgC,oBAAgB;MAAA,EAAC;MAC1DhC,8BAAwB;MACHA,qBAAK;MAAAA,iBAAQ;MAChCA,2BAAoF;MACtFA,iBAAM;MACNA,8BAAwB;MACGA,4BAAW;MAAAA,iBAAQ;MAC5CA,+BAAkG;MACpGA,iBAAM;MACNA,+BAAwB;MACJA,qBAAI;MAAAA,iBAAQ;MAC9BA,kCAAuE;MACpDA,4BAAW;MAAAA,iBAAS;MACrCA,mCAAsB;MAAAA,sBAAK;MAAAA,iBAAS;MACpCA,mCAAwB;MAAAA,wBAAO;MAAAA,iBAAS;MACxCA,mCAAwB;MAAAA,wBAAO;MAAAA,iBAAS;MAG5CA,+BAAwB;MACJA,qBAAI;MAAAA,iBAAQ;MAC9BA,6BAAkF;MACpFA,iBAAM;MACNA,mCAAsD;MAAAA,uBAAM;MAAAA,iBAAS;;;MAzBjEA,eAAkB;MAAlBA,uCAAkB;MAGlBA,eAAwB;MAAxBA,0CAAwB;MAsBNA,gBAA+B;MAA/BA,iDAA+B","names":["Validators","i0","ResourceCreateComponent","constructor","fb","authService","resourceService","router","ngOnInit","createForm","group","title","required","description","type","file","createResource","resource","get","value","subscribe","response","console","log","navigate","error","errorMessage","message","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["C:\\Users\\lola\\Documents\\GitHub\\AngularProject\\EntreCitoyens\\src\\app\\Components\\resource\\resource-create\\resource-create.component.ts","C:\\Users\\lola\\Documents\\GitHub\\AngularProject\\EntreCitoyens\\src\\app\\Components\\resource\\resource-create\\resource-create.component.html"],"sourcesContent":["/**\n * importé les modules Component, OnInit, FormGroup, FormBuilder, Validators et Router depuis le module @angular/core et le module @angular/forms ;\n * importé les services AuthService et ResourceService depuis leurs fichiers respectifs ;\n * créé la classe ResourceCreateComponent qui implémente l'interface OnInit ;\n * initialisé les propriétés createForm et errorMessage dans le constructeur ;\n * défini la méthode ngOnInit qui crée le formulaire de création de ressource avec le module FormBuilder ;\n * défini la méthode createResource qui crée une ressource en appelant la méthode createResource du service ResourceService et redirige vers la liste des ressources en cas de succès ou affiche un message d'erreur en cas d'échec.\n */\n\nimport { Component, OnInit } from '@angular/core';\nimport { FormGroup, FormBuilder, Validators } from '@angular/forms';\nimport { Router } from '@angular/router';\n\nimport { AuthService } from '../../../Services/auth/auth.service';\nimport { ResourceService } from '../../../Services/resource/resource.service';\n\n// import { resource } from 'src/app/DTO/resource';\n\n@Component({\n  selector: 'app-resource-create',\n  templateUrl: './resource-create.component.html',\n  styleUrls: ['./resource-create.component.css']\n})\nexport class ResourceCreateComponent implements OnInit {\n  createForm: FormGroup;\n  errorMessage: string;\n\n  constructor(\n    private fb: FormBuilder,\n    private authService: AuthService,\n    private resourceService: ResourceService,\n    private router: Router\n  ) { }\n\n  ngOnInit(): void {\n    this.createForm = this.fb.group({\n      title: ['', Validators.required],\n      description: ['', Validators.required],\n      type: ['', Validators.required],\n      file: ['', Validators.required]\n    });\n  }\n\n  createResource(): void {\n    const resource = {\n      title: this.createForm.get('title').value,\n      description: this.createForm.get('description').value,\n      type: this.createForm.get('type').value,\n      file: this.createForm.get('file').value\n    };\n\n    this.resourceService.createResource(resource)\n      .subscribe(\n        (response) => {\n          console.log(response);\n          this.router.navigate(['/resources']);\n        },\n        (error) => {\n          this.errorMessage = error.error.message;\n        }\n      );\n  }\n}\n","<!-- Nous utilisons le formulaire réactif d'Angular en associant le formulaire avec le groupe de contrôles createForm défini dans le composant TypeScript.\nChaque champ du formulaire est lié à un contrôle dans le groupe de contrôles via l'attribut formControlName.\nLe bouton \"Create\" est désactivé tant que le formulaire est invalide (c'est-à-dire tant que tous les champs requis ne sont pas remplis).\nLorsque le formulaire est soumis ((ngSubmit)=\"createResource()\"), la méthode createResource() du composant TypeScript est appelée. -->\n\n\n<h2>Create Resource</h2>\n<div *ngIf=\"errorMessage\" class=\"error-message\">\n  {{ errorMessage }}\n</div>\n<form [formGroup]=\"createForm\" (ngSubmit)=\"createResource()\">\n  <div class=\"form-group\">\n    <label for=\"title\">Title</label>\n    <input type=\"text\" id=\"title\" formControlName=\"title\" class=\"form-control\" required>\n  </div>\n  <div class=\"form-group\">\n    <label for=\"description\">Description</label>\n    <textarea id=\"description\" formControlName=\"description\" class=\"form-control\" required></textarea>\n  </div>\n  <div class=\"form-group\">\n    <label for=\"type\">Type</label>\n    <select id=\"type\" formControlName=\"type\" class=\"form-control\" required>\n      <option value=\"\">Select type</option>\n      <option value=\"photo\">Photo</option>\n      <option value=\"message\">Message</option>\n      <option value=\"article\">Article</option>\n    </select>\n  </div>\n  <div class=\"form-group\">\n    <label for=\"file\">File</label>\n    <input type=\"file\" id=\"file\" formControlName=\"file\" class=\"form-control\" required>\n  </div>\n  <button type=\"submit\" [disabled]=\"createForm.invalid\">Create</button>\n</form>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}